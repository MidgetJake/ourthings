<script id="init" type="text/html">
	<!-- init is always run automatically on startup -->
	@templates.render({"targetId":"#content","template":"#basic"},{"queueRun":"Instant"});
	 -elements.addClass({"targetId":"#content","class":"highlight"});
	 -openlayers.addMap({});
	 -openlayers.addLayer({"name":"osm","type":"osm"});
	 -openlayers.addLayer({"name":"data","type":"vector"});
</script>

<script id="basic" type="text/html">
	<h1>Get a List of breweries from open API and plot the results</h1>
	<button id="myButton" @api.get({"url":"https://api.openbrewerydb.org/breweries"});>
		-templates.render({"targetId":"#results","template":"#displayResults"});
		Call the API
	</button>
	<h2>Display the results here</h2>
	<div id="results"></div>
</script>

<script id="displayResults" type="text/html">
	{{#for window.memory['api.get'].value}}
		<button>{{window.memory['api.get'].value[#loop0].name}}</button>
		@openlayers.addFeature({"layer":"data","geometry":"SRID=4326;POINT({{window.memory['api.get'].value[#loop0].longitude}} {{window.memory['api.get'].value[#loop0].latitude}})"},{"queueRun":"Instant"});
	{{/for}}
</script>

